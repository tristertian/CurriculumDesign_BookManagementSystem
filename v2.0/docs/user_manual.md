# 图书管理系统用户手册

## 目录
1. [系统简介](#系统简介)
2. [安装指南](#安装指南)
3. [快速开始](#快速开始)
4. [功能详解](#功能详解)
5. [数据管理](#数据管理)
6. [常见问题](#常见问题)
7. [技术支持](#技术支持)

## 系统简介

图书管理系统是一个功能完善的图书信息管理工具，采用C++面向对象编程技术开发。系统提供了图书管理、销售处理、统计分析、数据持久化等核心功能。

### 主要特性
- **完善的图书管理**: 支持图书的添加、查询、修改、删除
- **智能的销售系统**: 自动库存管理、销售记录追踪
- **强大的统计功能**: 多维度统计、排序展示
- **可靠的数据存储**: 文件持久化、自动备份
- **友好的用户界面**: 控制台界面、操作简单

## 安装指南

### 系统要求
- 操作系统: Linux / Windows / macOS
- 编译器: GCC 4.8+ / Clang 3.3+ / MSVC 2013+
- 内存: 至少 512MB RAM
- 磁盘空间: 至少 50MB 可用空间

### 安装步骤

#### 1. 下载源码
```bash
git clone [项目地址]
cd book_management_system
```

#### 2. 安装依赖（Ubuntu/Debian）
```bash
sudo apt-get update
sudo apt-get install build-essential
```

#### 3. 编译项目
```bash
# 编译控制台版本
make console

# 或编译GUI版本（需要FLTK）
sudo apt-get install libfltk1.3-dev
make gui
```

#### 4. 运行程序
```bash
# 运行控制台版本
./bin/book_console

# 或运行GUI版本
./bin/book_gui
```

## 快速开始

### 启动系统
```bash
$ ./bin/book_console

========================================
     图书管理系统 v1.0
     基于C++面向对象编程
========================================

欢迎使用图书管理系统！
正在加载数据...
所有数据加载成功！

========================================
           图书管理系统主菜单           
========================================
1. 图书管理
2. 图书销售
3. 统计查询
4. 数据存盘
5. 读取数据
6. 退出系统
========================================
请选择操作:
```

### 添加第一本图书
1. 在主菜单选择 `1`（图书管理）
2. 在图书管理菜单选择 `1`（添加图书）
3. 按提示输入图书信息：
   ```
   书名: C++程序设计教程
   出版社: 清华大学出版社
   ISBN号: 9787302168979
   作者: 谭浩强
   库存量: 10
   价格: 59.90
   ```
4. 系统提示："图书添加成功！"

### 查询图书
1. 在图书管理菜单选择 `2`（查询图书）
2. 选择查询方式，如 `1`（按ISBN号查询）
3. 输入ISBN号：`9787302168979`
4. 系统显示图书详细信息

### 购买图书
1. 在主菜单选择 `2`（图书销售）
2. 输入要购买的图书ISBN号：`9787302168979`
3. 输入购买数量：`2`
4. 系统显示购买信息和总价

## 功能详解

### 1. 图书管理功能

#### 1.1 添加图书
**功能说明**: 向系统中添加新的图书信息

**操作步骤**:
1. 选择主菜单的"图书管理"
2. 选择"添加图书"
3. 按提示输入以下信息：
   - **书名**: 图书的完整名称
   - **出版社**: 出版该图书的机构
   - **ISBN号**: 国际标准书号（必须唯一）
   - **作者**: 图书的作者
   - **库存量**: 图书的库存数量（整数）
   - **价格**: 图书的单价（小数）

**注意事项**:
- ISBN号必须唯一，重复添加会提示错误
- 库存量必须为正整数
- 价格必须为正数

**示例**:
```
书名: C++ Primer (第5版)
出版社: 电子工业出版社
ISBN号: 9787121391318
作者: Stanley B. Lippman
库存量: 5
价格: 128.00
```

#### 1.2 查询图书
**功能说明**: 根据不同条件查询图书信息

**查询方式**:

**a) 按ISBN号查询**
- 优点: 精确查找，速度最快
- 适用场景: 已知ISBN号的情况

**b) 按书名查询**
- 优点: 直观易用
- 适用场景: 记得完整书名的情况
- 注意: 需要完全匹配书名

**c) 按作者查询**
- 优点: 可查找同一作者的多本图书
- 适用场景: 查找特定作者的所有作品

**d) 按出版社查询**
- 优点: 可查找同一出版社的多本图书
- 适用场景: 查找特定出版社的所有图书

**示例查询结果**:
```
====================================
书名: C++ Primer (第5版)
出版社: 电子工业出版社
ISBN号: 9787121391318
作者: Stanley B. Lippman
库存量: 5
价格: ¥128.00
====================================
```

#### 1.3 修改图书
**功能说明**: 更新已存在图书的信息

**操作步骤**:
1. 选择"修改图书"
2. 输入要修改的图书ISBN号
3. 系统显示当前图书信息
4. 输入新的信息（直接回车保持原值）
5. 确认修改

**注意事项**:
- 如果修改ISBN号，新ISBN号不能已存在
- 可以只修改部分信息，其他信息保持不变

#### 1.4 删除图书
**功能说明**: 从系统中删除图书信息

**操作步骤**:
1. 选择"删除图书"
2. 输入要删除的图书ISBN号
3. 确认删除操作

**注意事项**:
- 删除操作不可恢复，请谨慎操作
- 删除后相关的销售记录仍然保留

### 2. 图书销售功能

#### 2.1 购买图书
**功能说明**: 处理图书购买业务，自动更新库存

**操作步骤**:
1. 选择主菜单的"图书销售"
2. 输入要购买的图书ISBN号
3. 系统显示图书信息
4. 输入购买数量
5. 系统处理购买并显示结果

**购买流程**:
1. 验证图书是否存在
2. 检查库存是否充足
3. 计算总价（单价 × 数量）
4. 更新库存（减少相应数量）
5. 生成销售记录
6. 显示购买成功信息

**示例**:
```
请输入要购买的图书ISBN号: 9787121391318

图书信息:
====================================
书名: C++ Primer (第5版)
出版社: 电子工业出版社
ISBN号: 9787121391318
作者: Stanley B. Lippman
库存量: 5
价格: ¥128.00
====================================

请输入购买数量: 2

购买成功！
图书: C++ Primer (第5版)
数量: 2
总价: ¥256.00
```

**注意事项**:
- 购买数量必须大于0
- 库存不足时系统会提示错误
- 购买成功后库存自动减少

### 3. 统计查询功能

#### 3.1 显示所有图书
**功能说明**: 显示当前书库中所有图书的详细信息

**显示内容**:
- 图书种类总数
- 总库存量
- 库存总价值
- 每本图书的详细信息

#### 3.2 按价格排序统计
**功能说明**: 按图书价格从高到低排序显示

**显示内容**:
- 书名
- 价格
- ISBN号

**适用场景**: 
- 了解图书价格分布
- 找出最贵/最便宜的图书

#### 3.3 按库存量排序统计
**功能说明**: 按库存量从多到少排序显示

**显示内容**:
- 书名
- 库存量
- ISBN号

**适用场景**:
- 了解库存状况
- 识别畅销/滞销图书

#### 3.4 按作者统计
**功能说明**: 按作者分组显示所有图书

**显示内容**:
- 作者姓名
- 该作者的图书数量
- 每本图书的详细信息

#### 3.5 按出版社统计
**功能说明**: 按出版社分组显示所有图书

**显示内容**:
- 出版社名称
- 该出版社的图书数量
- 每本图书的详细信息

#### 3.6 生成综合统计报告
**功能说明**: 生成包含所有统计信息的完整报告

**报告内容**:

**库存统计**:
- 图书种类总数
- 库存总量
- 最大/最小库存量
- 平均库存量

**价格统计**:
- 最高价格
- 最低价格
- 平均价格
- 库存总价值

**销售统计**:
- 销售记录总数
- 总销售额

#### 3.7 显示销售记录
**功能说明**: 显示所有销售记录

**显示内容**:
- 销售记录总数
- 总销售额
- 每条销售记录的详细信息

### 4. 数据管理功能

#### 4.1 数据存盘
**功能说明**: 将当前程序中的数据保存到文件

**保存内容**:
- 所有图书信息 → `books.txt`
- 所有销售记录 → `sales.txt`

**操作步骤**:
1. 选择主菜单的"数据存盘"
2. 系统自动保存数据
3. 显示保存成功信息

**注意事项**:
- 数据文件保存在程序所在目录
- 原有文件会被覆盖
- 建议定期保存数据

#### 4.2 读取数据
**功能说明**: 从文件中读取数据到程序

**读取内容**:
- 从 `books.txt` 读取图书信息
- 从 `sales.txt` 读取销售记录

**操作步骤**:
1. 选择主菜单的"读取数据"
2. 系统自动加载数据
3. 显示加载成功信息

**注意事项**:
- 读取前会自动清空当前数据
- 文件格式必须正确
- 文件不存在时会提示错误

## 数据管理

### 数据文件格式

#### 图书数据文件 (books.txt)
```
书名|出版社|ISBN|作者|库存量|价格
C++程序设计|清华大学出版社|9787302168979|谭浩强|10|59.90
数据结构与算法|人民邮电出版社|9787115458563|严蔚敏|5|45.00
```

#### 销售数据文件 (sales.txt)
```
ISBN|书名|销售数量|总价格|销售时间
9787302168979|C++程序设计|2|119.80|2024-01-06 14:30:25
9787115458563|数据结构与算法|1|45.00|2024-01-06 14:35:10
```

### 数据备份
系统支持自动备份功能，备份文件保存在 `backup/` 目录下，文件名包含时间戳：
- `books_YYYYMMDD_HHMMSS.txt`
- `sales_YYYYMMDD_HHMMSS.txt`

### 数据导出
系统支持将数据导出为CSV格式，便于在其他软件中查看和分析：
- 图书数据导出为 `books.csv`
- 销售数据导出为 `sales.csv`

## 常见问题

### Q1: 系统无法启动怎么办？
**A**: 检查以下几点：
- 确认可执行文件存在且有执行权限
- 检查系统是否安装了必要的运行库
- 查看错误提示信息

### Q2: 添加图书时提示"ISBN号已存在"？
**A**: 表示该ISBN号已经被使用，请：
- 检查输入的ISBN号是否正确
- 使用查询功能确认图书是否已存在
- 如需要修改，使用更新功能

### Q3: 购买图书时提示"库存不足"？
**A**: 表示库存量不足以满足购买需求，请：
- 减少购买数量
- 先补充库存再销售

### Q4: 数据保存后在哪里查看？
**A**: 数据文件保存在程序所在目录：
- 图书数据：`books.txt`
- 销售数据：`sales.txt`
- 备份数据：`backup/` 目录下

### Q5: 如何防止数据丢失？
**A**: 建议采取以下措施：
- 定期使用"数据存盘"功能
- 重要操作前备份数据文件
- 使用版本控制管理数据文件

### Q6: 系统支持多人同时使用吗？
**A**: 当前版本为单机版，不支持多用户并发访问。如需多用户支持，建议使用数据库版本。

### Q7: 可以自定义数据文件位置吗？
**A**: 可以通过修改 `FileManager` 类的文件路径设置，或等待后续版本支持配置文件。

### Q8: 如何处理大量数据？
**A**: 
- 系统经过优化，可处理数千条记录
- 对于更大规模数据，建议使用数据库版本
- 定期清理历史数据

### Q9: 系统安全性如何？
**A**: 
- 数据以明文文本文件存储
- 建议设置文件权限，防止未授权访问
- 敏感数据请加密存储

### Q10: 如何升级系统？
**A**: 
- 备份现有数据
- 下载新版本程序
- 将数据文件复制到新版本目录
- 运行新版本程序

## 技术支持

### 联系信息
- 项目名称: 图书管理系统
- 版本: v1.0
- 开发语言: C++
- 开发框架: 面向对象编程

### 技术规格
- **编译器要求**: C++11 或更高版本
- **依赖库**: 标准C++库
- **可选GUI**: FLTK 1.3+
- **构建系统**: Makefile

### 开发文档
详细的技术文档请参见：
- `docs/design.md` - 系统设计文档
- `docs/api.md` - API接口文档
- `docs/development.md` - 开发指南

### 开源协议
本项目采用 MIT 协议开源，详见 `LICENSE` 文件。

### 贡献指南
欢迎提交Issue和Pull Request，请遵循以下规范：
1. 代码风格统一
2. 添加适当的注释
3. 编写单元测试
4. 更新相关文档

### 更新日志
#### v1.0 (2024-01-06)
- 初始版本发布
- 实现图书管理功能
- 实现销售管理功能
- 实现统计分析功能
- 实现数据持久化功能
- 提供控制台界面